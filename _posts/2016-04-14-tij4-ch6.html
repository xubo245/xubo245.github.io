---
layout:     post
title:      "Java编程思想（第四版）——访问权限控制"
subtitle:   "访问权限控制的深入学习与理解"
date:       2016-04-14
author:     "yuchen"
header-img: "img/post-bg-java.jpg"
tags:
    - Java
    - Access Control
---
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ch6.html</title>
  <meta name="generator" content="Haroopad 0.13.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node ellipse,.node polygon,.node rect{fill:#ECECFF;stroke:#CCF;stroke-width:1px}.edgePath .path{stroke:#333}.edgeLabel{background-color:#e8e8e8}.cluster rect{fill:#ffffde!important;rx:4!important;stroke:#aa3!important;stroke-width:1px!important}.cluster text{fill:#333}.actor{stroke:#CCF;fill:#ECECFF}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#CCF;fill:#ECECFF}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#CCF}.note{stroke:#aa3;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0{fill:rgba(102,102,255,.49)}.section2{fill:#fff400}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#8a90dd;stroke:#534fbc}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#bfc7ff;stroke:#534fbc}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}.node text{font-family:'trebuchet ms',verdana,arial;font-size:14px}div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms',verdana,arial;font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}html{height:100%}body{padding:5px 20px 26px;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}div.toc{margin:0!important}div.toc ul{padding-left:10px}div.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}div.toc li,div.toc ul{list-style-type:none}div.toc li{width:100%;padding:0;overflow:hidden}div.toc li a::after{content:"."}div.toc li a:before{content:"• "}div.toc h5{text-transform:uppercase}div.toc .title{float:left;padding-right:3px}div.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre.hljs,.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.solarized-light{padding:20px;color:#737373;font-size:15px;background:#fdf6e3;-webkit-font-smoothing:antialiased}.solarized-light a{color:#1e6ea7}.solarized-light a:hover{color:#268bd2}.solarized-light h1,.solarized-light h2,.solarized-light h3,.solarized-light h4,.solarized-light h5{color:#b58900}.solarized-light h2{border-bottom:1px solid #f6d784;line-height:1.7em}.solarized-light h6{color:#9c7600}.solarized-light hr{border:1px solid #fae7b3}.solarized-light pre>code{font-size:.9em}.solarized-light blockquote{border-left:4px solid #fae7b3;padding:0 15px;font-style:italic}.solarized-light table{background-color:#fdf4dd}.solarized-light table tr td,.solarized-light table tr th{border:1px solid #fae7b3}.solarized-light table tr:nth-child(2n){background-color:#fef8ea}.hljs{display:block;overflow-x:auto;padding:.5em;color:#dccf8f;background:url(/images/pojoaque.jpg) left top #181914;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.lisp .hljs-string{color:#586e75;font-style:italic}.css .hljs-tag,.css .rule .hljs-keyword,.hljs-addition,.hljs-keyword,.hljs-list .hljs-keyword,.hljs-winutils,.javascript .hljs-title,.method,.nginx .hljs-title{color:#b64926}.hljs-command,.hljs-doctag,.hljs-hexcolor,.hljs-number,.hljs-regexp,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#468966}.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-function .hljs-title,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-name,.hljs-title{color:#ffb03b}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.css .hljs-attribute{color:#b89859}.css .hljs-hexcolor,.css .hljs-number{color:#dccf8f}.css .hljs-class{color:#d3a60c}.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-important,.hljs-pi,.hljs-pragma,.hljs-preprocessor,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion{color:#dc322f}.tex .hljs-formula{background:#073642}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Menu_Button .MathJax_Hover_Arrow{position:absolute;cursor:pointer;display:inline-block;border:2px solid #AAA;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-khtml-border-radius:4px;font-family:'Courier New',Courier;font-size:9px;color:#F0F0F0}.MathJax_Menu_Button .MathJax_Hover_Arrow span{display:block;background-color:#AAA;border:1px solid;border-radius:3px;line-height:0;padding:4px}.MathJax_Hover_Arrow:hover{color:#fff!important;border:2px solid #CCC!important}.MathJax_Hover_Arrow:hover span{background-color:#CCC!important}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_About.MathJax_MousePost{outline:0}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:2px;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:2px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;padding-top:.25em;color:#666;font-size:.75em}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:1em}.MathJax_MenuRadioCheck.RTL{right:1em;left:auto}.MathJax_MenuLabel{padding:2px 2em 4px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #CCC;margin:4px 1px 0}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:Highlight;color:HighlightText}.MathJax_MenuDisabled:focus,.MathJax_MenuLabel:focus{background-color:#E8E8E8}.MathJax_ContextMenu .MathJax_MenuItem:focus,.MathJax_ContextMenu:focus{outline:0}#MathJax_AboutClose{top:.2em;right:.2em}.MathJax_Menu .MathJax_MenuClose{top:-10px;left:-10px}.MathJax_MenuClose{position:absolute;cursor:pointer;display:inline-block;border:2px solid #AAA;border-radius:18px;-webkit-border-radius:18px;-moz-border-radius:18px;-khtml-border-radius:18px;font-family:'Courier New',Courier;font-size:24px;color:#F0F0F0}.MathJax_MenuClose span{display:block;background-color:#AAA;border:1.5px solid;border-radius:18px;-webkit-border-radius:18px;-moz-border-radius:18px;-khtml-border-radius:18px;line-height:0;padding:8px 0 6px}.MathJax_MenuClose:hover{color:#fff!important;border:2px solid #CCC!important}.MathJax_MenuClose:hover span{background-color:#CCC!important}.MathJax_MenuClose:hover:focus{outline:0}.MathJax_Preview .MJXf-math{color:inherit!important}.MJX_Assistive_MathML{position:absolute!important;top:0;left:0;clip:rect(1px,1px,1px,1px);padding:1px 0 0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden!important;display:block!important;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.MJX_Assistive_MathML.MJX_Assistive_MathML_Block{width:100%!important}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1em;bottom:1.5em;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}.MJXp-script{font-size:.8em}.MJXp-right{-webkit-transform-origin:right;-moz-transform-origin:right;-ms-transform-origin:right;-o-transform-origin:right;transform-origin:right}.MJXp-bold{font-weight:700}.MJXp-italic{font-style:italic}.MJXp-scr{font-family:MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}.MJXp-frak{font-family:MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}.MJXp-sf{font-family:MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}.MJXp-cal{font-family:MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}.MJXp-mono{font-family:MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}.MJXp-largeop{font-size:150%}.MJXp-largeop.MJXp-int{vertical-align:-.2em}.MJXp-math{display:inline-block;line-height:1.2;text-indent:0;font-family:'Times New Roman',Times,STIXGeneral,serif;white-space:nowrap;border-collapse:collapse}.MJXp-display{display:block;text-align:center;margin:1em 0}.MJXp-math span{display:inline-block}.MJXp-box{display:block!important;text-align:center}.MJXp-box:after{content:" "}.MJXp-rule{display:block!important;margin-top:.1em}.MJXp-char{display:block!important}.MJXp-mo{margin:0 .15em}.MJXp-mfrac{margin:0 .125em;vertical-align:.25em}.MJXp-denom{display:inline-table!important;width:100%}.MJXp-denom>*{display:table-row!important}.MJXp-surd{vertical-align:top}.MJXp-surd>*{display:block!important}.MJXp-script-box>*{display:table!important;height:50%}.MJXp-script-box>*>*{display:table-cell!important;vertical-align:top}.MJXp-script-box>:last-child>*{vertical-align:bottom}.MJXp-script-box>*>*>*{display:block!important}.MJXp-mphantom{visibility:hidden}.MJXp-munderover{display:inline-table!important}.MJXp-over{display:inline-block!important;text-align:center}.MJXp-over>*{display:block!important}.MJXp-munderover>*{display:table-row!important}.MJXp-mtable{vertical-align:.25em;margin:0 .125em}.MJXp-mtable>*{display:inline-table!important;vertical-align:middle}.MJXp-mtr{display:table-row!important}.MJXp-mtd{display:table-cell!important;text-align:center;padding:.5em 0 0 .5em}.MJXp-mtr>.MJXp-mtd:first-child{padding-left:0}.MJXp-mtr:first-child>.MJXp-mtd{padding-top:0}.MJXp-mlabeledtr{display:table-row!important}.MJXp-mlabeledtr>.MJXp-mtd:first-child{padding-left:0}.MJXp-mlabeledtr:first-child>.MJXp-mtd{padding-top:0}.MJXp-merror{background-color:#FF8;color:#C00;border:1px solid #C00;padding:1px 3px;font-style:normal;font-size:90%}.MJXp-scale0{-webkit-transform:scaleX(0);-moz-transform:scaleX(0);-ms-transform:scaleX(0);-o-transform:scaleX(0);transform:scaleX(0)}.MJXp-scale1{-webkit-transform:scaleX(.1);-moz-transform:scaleX(.1);-ms-transform:scaleX(.1);-o-transform:scaleX(.1);transform:scaleX(.1)}.MJXp-scale2{-webkit-transform:scaleX(.2);-moz-transform:scaleX(.2);-ms-transform:scaleX(.2);-o-transform:scaleX(.2);transform:scaleX(.2)}.MJXp-scale3{-webkit-transform:scaleX(.3);-moz-transform:scaleX(.3);-ms-transform:scaleX(.3);-o-transform:scaleX(.3);transform:scaleX(.3)}.MJXp-scale4{-webkit-transform:scaleX(.4);-moz-transform:scaleX(.4);-ms-transform:scaleX(.4);-o-transform:scaleX(.4);transform:scaleX(.4)}.MJXp-scale5{-webkit-transform:scaleX(.5);-moz-transform:scaleX(.5);-ms-transform:scaleX(.5);-o-transform:scaleX(.5);transform:scaleX(.5)}.MJXp-scale6{-webkit-transform:scaleX(.6);-moz-transform:scaleX(.6);-ms-transform:scaleX(.6);-o-transform:scaleX(.6);transform:scaleX(.6)}.MJXp-scale7{-webkit-transform:scaleX(.7);-moz-transform:scaleX(.7);-ms-transform:scaleX(.7);-o-transform:scaleX(.7);transform:scaleX(.7)}.MJXp-scale8{-webkit-transform:scaleX(.8);-moz-transform:scaleX(.8);-ms-transform:scaleX(.8);-o-transform:scaleX(.8);transform:scaleX(.8)}.MJXp-scale9{-webkit-transform:scaleX(.9);-moz-transform:scaleX(.9);-ms-transform:scaleX(.9);-o-transform:scaleX(.9);transform:scaleX(.9)}.MathJax_PHTML .noError{font-size:90%;text-align:left;color:#000;padding:1px 3px;border:1px solid}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown solarized-light">
<h2 id="第六章-访问权限控制"><a name="第六章-访问权限控制" href="#第六章-访问权限控制"></a>第六章 访问权限控制</h2><hr class="page"><h5 id="1.访问权限控制的等级"><a name="1.访问权限控制的等级" href="#1.访问权限控制的等级"></a>1.访问权限控制的等级</h5><ul>
<li>从最大权限到最小权限依次为：public、protected、包访问权限（没有关键字）和private。</li></ul><h5 id="2.包：库单元"><a name="2.包：库单元" href="#2.包：库单元"></a>2.包：库单元</h5><p>Java用package关键字将构件捆绑到一个内聚的类库单元中。当编写一个Java源代码文件时，此文件通常被称为编译单元（有时也被称为转译单元）。每个编译单元必须有一个后缀名.java，而在编译单元内则可以有一个public类，该类的名称必须与文件的名称相同（包括大小写，但不包括文件的后缀名.java）。<strong>每个编译单元只能有一个public类，否则编译器就不会接受。</strong>如果在该编译单元之中还有额外的类的话，那么在包之外的世界是无法看到这些类的，这是因为它们不是public类，而且它们主要用来为主public类提供支持。</p><ul>
<li>package语句必须是文件中除注释以外的第一句程序代码。</li><li>Java包的命名规则全部使用小写字母，包括中间的字也是如此。</li></ul><blockquote>
<p>Java解释器的运行过程如下：<br>The Java interpreter proceeds as follows. First, it finds the environment variable CLASSPATH (set via the operating system, and sometimes by the installation program that installs Java or a Java-based tool on your machine). CLASSPATH contains one or more directories that are used as roots in a search for .class files. Starting at that root, the interpreter will take the package name and replace each dot with a slash to generate a path name off of the CLASSPATH root (so package foo.bar.baz becomes foo\bar\baz or foo/bar/baz or possibly something else, depending on your operating system). This is then concatenated to the various entries in the CLASSPATH. That’s where it looks for the .class file with the name corresponding to the class you’re trying to create. (It also searches some standard directories relative to where the Java interpreter resides.)</p>
</blockquote><h5 id="3.java访问权限修饰词"><a name="3.java访问权限修饰词" href="#3.java访问权限修饰词"></a>3.Java访问权限修饰词</h5><p>访问权限修饰词可以类中每个成员的定义之前（无论它是一个域还是一个方法）。</p><h6 id="包访问权限"><a name="包访问权限" href="#包访问权限"></a>包访问权限</h6><ul>
<li>默认访问权限没有任何关键字，但是通常是指包访问权限（有时也表示成为friendly）。其意味着当前的包中所有其他类对那个成员都有访问权限，但是对于这个包之外的所有类，这个成员却是<strong>private</strong>。由于一个编译单元（即一个文件），只能隶属于一个包，所有经由包访问权限，处于同一个编译单元中的所有类彼此之间都是自动可访问的。</li></ul><p>取得对某个成员的访问权的唯一途径是：<br><img src="/images/posts/tij_access00.png" alt="取得访问权限的方法"><br><strong>注意：</strong>同处于相同的目录但是没有给自己设定任何包名称的Java文件将被看做是隶属于该目录的默认包之中。</p><blockquote>
<p>All the files within the same directory that don’t have explicit package declarations are implicitly part of the default package for
that directory.</p>
</blockquote><h6 id="public:接口访问权限"><a name="public:接口访问权限" href="#public:接口访问权限"></a>public:接口访问权限</h6><p>使用关键字public，就意味着public之后紧跟着的成员声明自己对每个人（任何类）都是可用的（可访问的），尤其是使用类库的客户程序员更是如此。</p><h6 id="private：你无法访问"><a name="private：你无法访问" href="#private：你无法访问"></a>private：你无法访问</h6><p>关键字private的意思是，除了包含该成员的类之外，其他任何类都无法访问这个成员。<br><strong>注意：</strong>使用类的客户端程序员是无法访问包访问权限成员的。
private的运用示例：可能想控制如何创建对象，并阻止别人直接访问某个特定的构造器（或全部构造器）。示例如下：  </p><pre class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sundae</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Sundae</span><span class="hljs-params">()</span> </span>{}
  <span class="hljs-function"><span class="hljs-keyword">static</span> Sundae <span class="hljs-title">makeASundae</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Sundae();
  }
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IceCream</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    <span class="hljs-comment">//! Sundae x = new Sundae();</span>
    Sundae x = Sundae.makeASundae();
  }
}
</pre><p>上述示例中，不能通过构造器来创建Sundae对象，而必须调用makeASundae()方法来达到此目的。  </p><ul>
<li><strong>说明：</strong>除非必须公开底层实现细目（此种境况很少），否则就应该将所有的域指定为private。</li><li>However, just because a reference to an object is private inside a class doesn’t mean that some other object can’t have a public reference to the same object.（如何理解此句话？）</li></ul><h6 id="protected：继承访问权限"><a name="protected：继承访问权限" href="#protected：继承访问权限"></a>protected：继承访问权限</h6><ul>
<li>如果创建了一个新包，并在该新包中创建一个类（子类）继承另一个包中的某个类（基类），那么唯一可以访问基类的成员就是其public成员和protected成员（当然，如果在同一个包内执行继承工作，就可以操纵所有的拥有包访问权限的成员）。</li><li>protected也提供包访问权限，即相同包内的其他所有类可以访问protected元素。</li></ul><h6 id="小结：访问权限示意图"><a name="小结：访问权限示意图" href="#小结：访问权限示意图"></a>小结：访问权限示意图</h6><p><img src="/images/posts/tij_access01.png" alt="访问权限示意图">  </p><h5 id="4.接口和实现"><a name="4.接口和实现" href="#4.接口和实现"></a>4.接口和实现</h5><ul>
<li>访问权限的控制常被称为是具体实现的隐藏。把数据和方法包装进类中，以及具体实现的隐藏，行共同被称作是封装。其结果是一个同时带有特征和行为的数据类型。  </li><li>为了清楚起见，可能会采用一种将public成员置于开头，后面紧跟protected、包访问权限和private成员的创建类形式。示例如下：  <pre data-origin="public class OrganizedByAccess {
public void pub1() { /* ... */ }
public void pub2() { /* ... */ }
public void pub3() { /* ... */ }
private void priv1() { /* ... */ }
private void priv2() { /* ... */ }
private void priv3() { /* ... */ }
private int i;
// ...
}
" class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrganizedByAccess</span> </span>{
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pub1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pub2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pub3</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">priv1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">priv2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">priv3</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> i;
<span class="hljs-comment">// ...</span>
}
</pre>
</li></ul><h5 id="5.类的访问权限"><a name="5.类的访问权限" href="#5.类的访问权限"></a>5.类的访问权限</h5><ul>
<li>为了控制某个类的访问权限，修饰词必须出现于关键字class之前，如，<code>public class Widget{...}</code>。<br>类的一些限制如下：
<img src="/images/posts/tij_access02.png" alt="类的限制">  </li><li>类既不可以是private(否则，除该类外，其他任何类都不可以访问它)，也不可以是protected的。所以对类的访问权限，仅有两个选择：包访问权限或public。如果不希望其他人对该类用于访问权限，可以把所以的构造器都指定为private，从而阻止任何人创建该类的对象，但是有一个例外，就是你在该类的static成员内部可以创建该类的对象。示例如下：</li></ul><pre class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Soup1</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Soup1</span><span class="hljs-params">()</span> </span>{}
  <span class="hljs-comment">// (1) Allow creation via static method:</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Soup1 <span class="hljs-title">makeSoup</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Soup1();
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Soup2</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Soup2</span><span class="hljs-params">()</span> </span>{}
  <span class="hljs-comment">// (2) Create a static object and return a reference</span>
  <span class="hljs-comment">// upon request.(The "Singleton" pattern):</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Soup2 ps1 = <span class="hljs-keyword">new</span> Soup2();
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Soup2 <span class="hljs-title">access</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> ps1;
  }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> </span>{}
}

<span class="hljs-comment">// Only one public class allowed per file:</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lunch</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testPrivate</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Can't do this! Private constructor:</span>
    <span class="hljs-comment">//! Soup1 soup = new Soup1();</span>
  }
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testStatic</span><span class="hljs-params">()</span> </span>{
    Soup1 soup = Soup1.makeSoup();
  }
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testSingleton</span><span class="hljs-params">()</span> </span>{
    Soup2.access().f();
  }
}
</pre><p><strong>说明</strong>：<br>1）如果想要在返回引用前在Soup1上做一些额外的工作，或是如果想要记录到底创建了多少个Soup1对象（可能与限制其数量），这种做法将会大有裨益的。<br>2）Soup2用到了单例模式（singleton），这是因为我们始终只能创建它的一个对象。  </p><ul>
<li><p><strong>注意：</strong><br>1）如果没有为类访问权限指定一个访问修饰符，它就会默认得到包访问权限。此时，即使将该类的构造器声明为public的，也不能在包外实例化该类。并且，即使该类中拥有static public字段或static public方法，也不能在包外直接通过该类访问。总之，在具有包访问权限的类中，使用public并不能将其修饰的成员或构造器提升到public权限，即使用public无效。  </p>
<p>  2）一个类的默认构造器的访问权限和该类的访问权限相同。  </p>
<p>  3）<mark>内部类可以是private或protected的。</mark></p>
</li></ul>


</body>
</html>
